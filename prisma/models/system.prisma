model Cron {
  id String @id @default(cuid())

  name           String    @unique
  cronExpr       String
  timezone       String    @default("UTC")
  modulePath     String
  functionName   String
  enabled        Boolean   @default(true)
  lastRunAt      DateTime?
  lastStatus     String?
  lastDurationMs Int?
  lockedAt       DateTime?

  history History[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model History {
  id String @id @default(cuid())

  status     String
  startedAt  DateTime
  endedAt    DateTime
  durationMs Int
  message    Json?    @default("{}")

  cron   Cron   @relation(fields: [cronId], references: [id], onDelete: Cascade)
  cronId String

  createdAt DateTime @default(now())

  @@index([cronId])
} 